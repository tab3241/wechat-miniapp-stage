!function(f,g){"object"==typeof exports&&"undefined"!=typeof module?module.exports=f():"function"==typeof define&&define.amd?define(g):g.Pitaya=f()}(main,this);
function main(){function f(a,b,c){if(a[b]){var d=a[b];a[b]=function(a){c.call(this,a,b);d.call(this,a)}}else a[b]=function(a){c.call(this,a,b)}}function g(a){this.app=a}function r(){function a(){return Math.random().toString(36).slice(-8)}return a()+a()+a()+a()}function l(a,b){function c(){return new Promise(function(b){a.n=Date.now();wx.request({url:"https://bright.xcx-x.com/x.html",data:a,method:"GET",success:function(a){b(200==a.statusCode?"":"status error")},fail:function(a){b("fail")}})})}a.v=
F;a.pk=G;a.f=b;a.s=m;a.ai=H;a.u=I;a.t=Date.now();n?(t.push(c),u.concat()):u.push(c)}function h(a,b,c){var d={};d.pa=p;d.et=a;d.en=b||"";d.ep=c||"";l(d,"E")}function J(a){this.pitaya=new g(this);v=a}function K(a){w&&!k?h(3,"pitaya_show",a):w=!0;L()}function M(){k||h(3,"pitaya_hide")}function N(a){}function O(){var a=this.route;var b=this.options;var c="";if(b){for(var d in b)c+="&"+d+"="+b[d];0<c.length&&(c=c.slice(1))}b=c;p=a+(b?"?"+b:"");k?k=!1:h(2,"pitaya_page")}function L(){!x&&q.getUserInfo&&
wx.getSetting({success:function(a){a.authSetting["scope.userInfo"]&&(wx.getUserInfo({withCredentials:!1,success:function(a){y=a.rawData;l({ui:y},"UI")}}),x=!0)}})}var q=require("pitaya-config"),F="1.0.0",P=Date.now(),t=new function(){var a={},b=[],c=[],d=0;a.push=function(e){c.push(new Promise(function(c){function z(){d++;e().then(function(a){c(a)}).then(function(){a.next()})}1>d?z():b.push(z)}))};a.all=function(){return Promise.all(c)};a.next=function(){d--;0<b.length&&b.shift()()};return a},u=new function(){var a=
{},b=[];a.push=function(a){b.push(a)};a.concat=function(){b.map(function(a){t.push(a)});b=[]};return a},G=q.pitayaKey,m=r(),H=function(){return wx.getAccountInfoSync?wx.getAccountInfoSync().miniProgram.appId:void 0===wx.getAccountInfoSync?"":wx.getAccountInfoSync().miniProgram.appId.split("").map(function(a){return a.charCodeAt(0)+9}).join("-")}(),I=function(){try{var a=wx.getStorageSync("pitaya_uid");a||(a=r(),wx.setStorageSync("pitaya_uid",a));return a}catch(b){return"pitaya_uid_error"}}(),n,v=
{},e={},A="",B="",C="",y={},w=!1,D=!1,p,k=!1,x=!1,E=!1;wx.pitaya=new g("");try{e=wx.getSystemInfoSync()}catch(a){}wx.getNetworkType({success:function(a){C=a.networkType}});(function(){!E&&q.getLocation&&wx.getSetting({success:function(a){a.authSetting["scope.userLocation"]&&(wx.getLocation({success:function(a){A=a.latitude;B=a.longitude}}),E=!0)}})})();g.prototype.sendOpenId=function(a){if(!D){D=!0;n=a;a={};a.op=n;a.lo=v;a.ot=P;try{a.b=e.brand,a.m=e.model,a.pr=e.pixelRatio,a.ww=e.windowWidth,a.wh=
e.windowHeight,a.wl=e.language,a.wv=e.version,a.wp=e.platform,a.sdkv=e.SDKVersion,a.sys=e.system}catch(b){}a.nt=C;a.lat=A;a.lng=B;l(a,"L")}};g.prototype.sendPhone=function(a){var b={};b.p=a;l(b,"P")};g.prototype.sendEvent=function(a,b){a&&100<a.length?console.log("PITAYA \u4e8b\u4ef6\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26\uff01"):b&&200<(b.length?b.length:JSON.stringify(b).length)?console.log("PITAYA \u4e8b\u4ef6\u53c2\u6570\u4e0d\u80fd\u8d85\u8fc7200\u4e2a\u5b57\u7b26\uff01"):h(1,
a,b)};return function(a){!function(){var a=App,c=Page;App=function(b){f(b,"onLaunch",J);f(b,"onShow",K);f(b,"onHide",M);a(b)};Page=function(a){f(a,"onLoad",N);f(a,"onShow",O);var b=a.onShareAppMessage;void 0!==b&&null!==b&&(a.onShareAppMessage=function(a){k=!0;var c=b.call(this,a);c||(c={});c.path||(c.path=p);0>c.path.indexOf("pitaya_fo")?c.path+=(0<c.path.indexOf("?")?"&":"?")+"pitaya_fo="+m:c.path=c.path.replace(/pitaya_fo=([^&]*)/g,"pitaya_fo="+m);h(4,"pitaya_share",a.from);return c});c(a)}}()}()}
;